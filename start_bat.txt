@echo off
echo ğŸš€ Starting Document Extraction System...
echo.

REM Check if .env exists
if not exist "backend\.env" (
    echo âš ï¸  No .env file found!
    echo Creating from template...
    copy "backend\.env.example" "backend\.env"
    echo.
    echo ğŸ“ Please edit backend\.env and add your API keys:
    echo    - OPENAI_API_KEY (required)
    echo    - NANONETS_API_KEY (optional)
    echo.
    pause
)

REM Start backend
echo ğŸ Starting Python backend...
cd backend
if not exist "venv\" (
    python -m venv venv
)
call venv\Scripts\activate
pip install -r requirements.txt >nul 2>&1
start /B python main.py
cd ..

REM Wait for backend
echo â³ Waiting for backend to start...
timeout /t 5 /nobreak >nul

REM Start frontend
echo ğŸŒ Starting Node.js frontend...
cd frontend
call npm install >nul 2>&1
start /B npm start
cd ..

echo.
echo âœ… System started!
echo.
echo ğŸ“± Frontend: http://localhost:3000
echo ğŸ”§ Backend:  http://localhost:5000
echo.
echo Press any key to stop all services...
pause >nul

REM Cleanup
taskkill /F /IM python.exe /T >nul 2>&1
taskkill /F /IM node.exe /T >nul 2>&1
echo ğŸ‘‹ Shutting down...
